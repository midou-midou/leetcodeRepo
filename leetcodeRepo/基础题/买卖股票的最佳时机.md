# 买卖股票的最佳时机

### 概述：

给定一个数组 `prices` ，其中 `prices[i]` 表示股票第 i 天的价格。

在每一天，你可能会决定购买和/或出售股票。你在任何时候 最多 只能持有 一股 股票。你也可以购买它，然后在 同一天 出售。
返回 你能获得的 最大 利润 。

### 实例：

```
输入: prices = [7,1,5,3,6,4]
输出: 7
解释: 在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5-1 = 4 。
     随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6-3 = 3 。
```

### 题解：

这是一道可以用动态规划、贪心算法解决的问题

#### 动态规划：

[只能应用于有最优子结构的问题。最优子结构的意思是局部最优解能决定全局最优解](https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92)

首先，这个问题每一天就是要么持有股票，要么没有股票。

- 当天没有持有股票有两种情况，前一天获得了最大利润，第二种情况就是当天获得了最大利润。
- 当天持有股票的两种情况，前一天没有获得最大利润，是前一天的股票。第二种情况就是当天买入了股票

根据上面的分析，可以知道每一天都有持有股票和没有股票这么两种状态。每种状态也都有对应的发生条件

伪代码：`当天没有股票=MAX(前一天持有股票利润+当天股票价格，前一天手里没有股票的利润)`，`当天有股票=MAX(前一天没有股票的利润-当天股票价格，前一天持有股票利润)`

```javascript
public int maxProfit(int[] prices) {
    if (prices == null || prices.length < 2)
        return 0;
    int length = prices.length;
    //初始条件
    int hold = -prices[0];//持有股票
    int noHold = 0;//没持有股票
    for (int i = 1; i < length; i++) {
        //递推公式转化的
        noHold = Math.max(noHold, hold + prices[i]);
        hold = Math.max(hold, noHold - prices[i]);
    }
    //最后一天肯定是手里没有股票的时候利润才会最大，
    //所以这里返回的是noHold
    return noHold;
}
```

